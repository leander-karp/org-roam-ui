(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(5640)}])},2280:function(e,l,t){"use strict";t.d(l,{Al:function(){return o},Hl:function(){return s},To:function(){return u},bG:function(){return g},eG:function(){return c},nD:function(){return x},o1:function(){return h},po:function(){return d},wy:function(){return a}});var i=t(8250);let n=[],r={};for(let e in i.oY)for(let l in i.oY[e]){let t=e+l;"LinearNone"===t&&(t="Linear"),n.push(t),r[t]=i.oY[e][l]}let o=r,s={enabled:!0,charge:-700,collision:!0,collisionStrength:20,centering:!0,centeringStrength:.2,linkStrength:.3,linkIts:1,alphaDecay:.05,alphaTarget:0,alphaMin:0,velocityDecay:.25,gravity:.3,gravityOn:!0,gravityLocal:!1},a={orphans:!1,dailies:!1,parent:"heading",filelessCites:!1,tagsBlacklist:[],tagsWhitelist:[],dirsBlocklist:[],dirsAllowlist:[],bad:!0,nodes:[],links:[],date:[],noter:!0},c={method:"degree"},d={particles:!1,particlesNumber:0,particlesWidth:4,arrows:!1,arrowsLength:1,arrowsPos:.5,arrowsColor:"",linkOpacity:.8,linkWidth:1,nodeRel:3,nodeOpacity:1,nodeResolution:12,labels:2,labelScale:1.5,labelFontSize:10,labelLength:40,labelWordWrap:25,labelLineSpace:1,labelDynamicDegree:8,labelDynamicStrength:.5,highlight:!0,highlightNodeSize:1.1,highlightLinkSize:.7,highlightFade:.8,highlightAnim:!0,animationSpeed:360,algorithmOptions:n,algorithmName:"CircularOut",linkColorScheme:"gray.500",nodeColorScheme:["red.500","gray.600","yellow.500","green.500","cyan.500","blue.500","pink.500","purple.500","orange.500"],nodeHighlight:"purple.500",linkHighlight:"purple.500",backgroundColor:"white",emacsNodeColor:"gray.800",labelTextColor:"black",labelBackgroundColor:"",labelBackgroundOpacity:.7,citeDashes:!0,citeDashLength:35,citeGapLength:15,citeLinkColor:"gray.700",citeLinkHighlightColor:"",citeNodeColor:"black",refDashes:!0,refDashLength:35,refGapLength:15,refLinkColor:"gray.700",refLinkHighlightColor:"",refNodeColor:"black",nodeSizeLinks:.5,nodeZoomSize:1.2},h={follow:"zoom",localSame:"add",zoomPadding:200,zoomSpeed:2e3},x={highlight:"hover",local:"double",follow:"never",context:"right",preview:"click",backgroundExitsLocal:!1},u={neighbors:1},g=["red.500","orange.500","yellow.500","green.500","cyan.500","blue.500","pink.500","purple.500","white","gray.100","gray.200","gray.300","gray.400","gray.500","gray.600","gray.700","gray.800","gray.900","black"]},5640:function(e,l,t){"use strict";t.r(l),t.d(l,{GraphPage:function(){return lU},default:function(){return lZ}});var i=t(5893),n=t(2730),r=t(6714),o=t(7747),s=t(3717),a=t(2568),c=t(9993),d=t(1715),h=t(9008),x=t.n(h),u=t(5152),g=t.n(u),j=t(7294),p=t(8285),m=t(5890),f=t(2003),b=t(7520),v=t(2280),C=t(6712),y=t(4040),k=t(2757),w=t(2658),S=t(4970),I=t(5541),z=t(9778),L=t(9472),N=t(4859),R=t(6205),T=t(4346),O=t(966),D=t(4e3),A=t(4253),W=t(3108),H=t(6984),B=t(6547),F=t(9784),E=t(6855),V=t(5349),P=t(1787),G=t(5527),M=t(2591),_=t(99),q=t(9580),X=t(8554),Z=t.n(X),U=t(1982),J=t(8983),K=t(3114),Q=t(4662);let $=[.25,.1,.25,1],Y={enter:(e,l)=>({...e,delay:(0,J.hj)(l)?l:null==l?void 0:l.enter}),exit:(e,l)=>({...e,delay:(0,J.hj)(l)?l:null==l?void 0:l.exit})},ee=e=>null!=e&&parseInt(e.toString(),10)>0,el={exit:{size:{duration:.2,ease:$},opacity:{duration:.3,ease:$}},enter:{size:{duration:.3,ease:$},opacity:{duration:.4,ease:$}}},et={exit:e=>{var l;let{animateOpacity:t,startingSize:i,transition:n,transitionEnd:r,delay:o,dimension:s}=e;return{...t&&{opacity:ee(i)?1:0},overflow:"hidden",[s]:i,transitionEnd:null==r?void 0:r.exit,transition:null!==(l=null==n?void 0:n.exit)&&void 0!==l?l:Y.exit(el.exit,o)}},enter:e=>{var l;let{animateOpacity:t,endingSize:i,transition:n,transitionEnd:r,delay:o,dimension:s}=e;return{...t&&{opacity:1},[s]:i,transitionEnd:null==r?void 0:r.enter,transition:null!==(l=null==n?void 0:n.enter)&&void 0!==l?l:Y.enter(el.enter,o)}}},ei=j.forwardRef((e,l)=>{let{in:t,unmountOnExit:n,animateOpacity:r=!0,startingSize:o=0,endingSize:s="auto",dimension:a="height",style:c,className:d,transition:h,transitionEnd:x,...u}=e,[g,p]=j.useState(!1);j.useEffect(()=>{let e=setTimeout(()=>{p(!0)});return()=>clearTimeout(e)},[]),(0,q.ZK)({condition:!!("number"==typeof o&&o>0&&n),message:"startingSize and unmountOnExit are mutually exclusive. You can't use them together"});let m=parseFloat(o.toString())>0,f={startingSize:o,endingSize:s,animateOpacity:r,dimension:a,transition:g?h:{enter:{duration:0}},transitionEnd:Z()(x,{enter:{overflow:"initial"},exit:n?void 0:{display:m?"block":"none"}})},b=!n||t,v=t||n?"enter":"exit";return(0,i.jsx)(K.M,{initial:!1,custom:f,children:b&&(0,i.jsx)(Q.E.div,{ref:l,...u,className:(0,U.cx)("chakra-collapse",d),style:{overflow:"hidden",display:"block",...c},custom:f,variants:et,initial:!!n&&"exit",animate:v,exit:"exit"})})});J.Ts&&(ei.displayName="Collapse");let en=e=>{let{setTagColors:l,setFilter:t,filter:r,tagColors:a,target:c}=e,d=r.tagsBlacklist,h=r.tagsWhitelist,x=d.indexOf(c)>-1,u=h.indexOf(c)>-1,g=(0,n.q)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(S.s,{icon:(0,i.jsx)(o.xu,{bgColor:a[c],borderRadius:"sm",height:3,width:3,borderColor:a[c]||"gray.600",borderWidth:1}),closeOnSelect:!1,onClick:g.onToggle,children:(0,i.jsx)(D.x,{children:"Change color"})}),(0,i.jsx)(ei,{in:g.isOpen,children:(0,i.jsxs)(s.k,{ml:2,mt:2,flexWrap:"wrap",children:[(0,i.jsx)(o.xu,{children:(0,i.jsx)(o.xu,{tabIndex:0,cursor:"pointer",onClick:()=>l(e=>Object.fromEntries(Object.keys(e).filter(e=>e!==c).map(l=>[l,e[l]]))),bgColor:"",m:1,borderRadius:"sm",borderColor:"gray.600",borderWidth:1,height:3,width:3})},"empty"),v.bG.map(e=>(0,i.jsx)(o.xu,{children:(0,i.jsx)(o.xu,{tabIndex:0,cursor:"pointer",onClick:()=>l({...a,[c]:e}),bgColor:e,m:1,borderRadius:"sm",height:3,width:3})},e))]})}),!u&&(0,i.jsx)(S.s,{onClick:()=>{if(!x){t(e=>({...e,tagsBlacklist:[...e.tagsBlacklist,c]}));return}t(e=>({...e,tagsBlacklist:e.tagsBlacklist.filter(e=>e!==c)}))},icon:x?(0,i.jsx)(B.V,{}):(0,i.jsx)(_.t,{}),children:x?"Remove from blocklist":"Add to blocklist"}),!x&&(0,i.jsx)(S.s,{onClick:()=>{if(!u){t(e=>({...e,tagsWhitelist:[...e.tagsWhitelist,c]}));return}t(e=>({...e,tagsWhitelist:e.tagsWhitelist.filter(e=>e!==c)}))},icon:u?(0,i.jsx)(B.V,{}):(0,i.jsx)(P.O,{}),children:u?"Remove from allowlist":"Add to allowlist"})]})},er=e=>{var l,t;let{target:r,coordinates:o,handleLocal:s,menuClose:a,scope:c,webSocket:d,setPreviewNode:h,setTagColors:x,tagColors:u,setFilter:g,filter:j}=e,{isOpen:m,onOpen:f,onClose:b}=(0,n.q)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(C.v,{defaultIsOpen:!0,closeOnBlur:!1,onClose:()=>a(),children:(0,i.jsx)(y.q,{zIndex:"overlay",bgColor:"white",color:"black",position:"absolute",left:o.left,top:o.top,right:o.right,bottom:o.bottom,fontSize:"xs",boxShadow:"xl",children:"string"!=typeof r?(0,i.jsxs)(i.Fragment,{children:[r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.X,{size:"xs",isTruncated:!0,px:3,py:1,children:r.title}),(0,i.jsx)(w.R,{borderColor:"gray.500"})]}),0!==c.nodeIds.length&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(S.s,{onClick:()=>s(r,"add"),icon:(0,i.jsx)(H.I,{}),children:"Expand local graph at node"}),(0,i.jsx)(S.s,{onClick:()=>s(r,"replace"),icon:(0,i.jsx)(p.DvO,{}),children:"Open local graph for this node"}),(0,i.jsx)(S.s,{onClick:()=>s(r,"remove"),icon:(0,i.jsx)(B.V,{}),children:"Exclude node from local graph"})]}),(null==r?void 0:null===(l=r.properties)||void 0===l?void 0:l.FILELESS)?(0,i.jsx)(S.s,{icon:(0,i.jsx)(E.d,{}),onClick:()=>(0,M.sC)(r,d),children:"Create node"}):(0,i.jsx)(S.s,{icon:(0,i.jsx)(F.d,{}),onClick:()=>(0,M.y2)(r,d),children:"Open in Emacs"}),(null==r?void 0:null===(t=r.properties)||void 0===t?void 0:t.ROAM_REFS)&&(0,i.jsx)(S.s,{icon:(0,i.jsx)(V.h,{}),children:"Open in Zotero"}),0===c.nodeIds.length&&(0,i.jsx)(S.s,{icon:(0,i.jsx)(p.DvO,{}),onClick:()=>s(r,"replace"),children:"Open local graph"}),(0,i.jsx)(S.s,{icon:(0,i.jsx)(P.O,{}),onClick:()=>{h(r)},children:"Preview"}),(null==r?void 0:r.level)===0&&(0,i.jsx)(S.s,{closeOnSelect:!1,icon:(0,i.jsx)(G.p,{color:"red.500"}),color:"red.500",onClick:f,children:"Permanently delete note"})]}):(0,i.jsx)(en,{target:r,tagColors:u,filter:j,setTagColors:x,setFilter:g})})}),"string"!=typeof r&&(0,i.jsxs)(I.u_,{isCentered:!0,isOpen:m,onClose:b,children:[(0,i.jsx)(z.Z,{}),(0,i.jsxs)(L.h,{zIndex:"popover",children:[(0,i.jsx)(N.x,{children:"Delete node?"}),(0,i.jsx)(R.o,{}),(0,i.jsx)(T.f,{children:(0,i.jsxs)(O.g,{spacing:4,display:"flex",alignItems:"flex-start",children:[(0,i.jsx)(D.x,{children:"This will permanently delete your note:"}),(0,i.jsx)(D.x,{fontWeight:"bold",children:null==r?void 0:r.title}),(null==r?void 0:r.level)!==0&&(0,i.jsx)(D.x,{children:"This will only delete the from this heading until but not including the next node. Your parent file and all other nodes will not be deleted."}),(0,i.jsx)(D.x,{children:"Are you sure you want to do continue?"})]})}),(0,i.jsxs)(A.m,{children:[(0,i.jsx)(W.z,{mr:3,onClick:()=>{console.log("closing"),b(),a()},children:"Cancel"}),(0,i.jsx)(W.z,{variant:"link",colorScheme:"red",ml:3,onClick:()=>{console.log("aaaaa"),(0,M.ef)(r,d),b(),a()},children:"Delete node"})]})]})]})]})};var eo=t(8590),es=t(2088),ea=t(7219),ec=t(3459),ed=t(1828);let eh=e=>{let{setJustification:l,justification:t,canUndo:n,canRedo:r,previousPreviewNode:o,nextPreviewNode:d,outline:h,setOutline:x,collapse:u,setCollapse:g}=e;return(0,i.jsxs)(s.k,{flex:"0 1 40px",pb:3,alignItems:"center",justifyContent:"space-between",pr:1,children:[(0,i.jsx)(s.k,{children:(0,i.jsxs)(eo.h,{isAttached:!0,children:[(0,i.jsx)(a.u,{label:"Go backward",children:(0,i.jsx)(c.h,{_focus:{},variant:"subtle",icon:(0,i.jsx)(ea.w,{}),"aria-label":"Previous node",disabled:!n,onClick:()=>o()})}),(0,i.jsx)(a.u,{label:"Go forward",children:(0,i.jsx)(c.h,{_focus:{},variant:"subtle",icon:(0,i.jsx)(ec.X,{}),"aria-label":"Next node",disabled:!r,onClick:()=>d()})})]})}),(0,i.jsxs)(s.k,{children:[(0,i.jsx)(a.u,{label:"Justify content",children:(0,i.jsx)(c.h,{variant:"subtle","aria-label":"Justify content",icon:[(0,i.jsx)(p.v9V,{},"justify"),(0,i.jsx)(p.YSr,{},"left"),(0,i.jsx)(p.RXA,{},"right"),(0,i.jsx)(p.tr_,{},"center")][t],onClick:()=>l(e=>(e+1)%4)})}),(0,i.jsx)(a.u,{label:"Toggle outline view",children:(0,i.jsx)(c.h,{variant:"subtle","aria-label":"Justify content",icon:h?(0,i.jsx)(ed.XQM,{}):(0,i.jsx)(ed.JfF,{}),onClick:()=>x(e=>!e)})}),(0,i.jsx)(a.u,{label:"Toggle headers",children:(0,i.jsx)(c.h,{variant:"subtle","aria-label":"Toggle headers",icon:u?(0,i.jsx)(es.omV,{}):(0,i.jsx)(es.egf,{}),onClick:()=>g(e=>!e)})})]})]})};var ex=t(8371);let eu=e=>{var l,t,n;let{filter:r,setFilter:o,tagColors:a,openContextMenu:c,previewNode:d}=e;return(null==d?void 0:d.tags)&&(null==d?void 0:null===(l=d.tags)||void 0===l?void 0:l[0])!==null?(0,i.jsx)(s.k,{mb:2,flexWrap:"wrap",children:null==d?void 0:null===(n=d.tags)||void 0===n?void 0:null===(t=n.map)||void 0===t?void 0:t.call(n,e=>{var l,t,n;let s=null!==(t=r.tagsBlacklist)&&void 0!==t?t:[],d=null!==(n=r.tagsWhitelist)&&void 0!==n?n:[],h=s.includes(e),x=d.includes(e);return(0,i.jsxs)(ex.Vp,{tabIndex:0,mr:2,mt:2,onContextMenu:l=>{l.preventDefault(),c(e,l)},cursor:"pointer",onClick:()=>{if(h){o(l=>({...l,tagsBlacklist:l.tagsBlacklist.filter(l=>l!==e),tagsWhitelist:[...l.tagsWhitelist,e]}));return}if(x){o(l=>({...l,tagsWhitelist:l.tagsWhitelist.filter(l=>l!==e)}));return}o(l=>({...l,tagsBlacklist:[...l.tagsBlacklist,e]}))},size:"sm",variant:"outline",colorScheme:(null===(l=a[e])||void 0===l?void 0:l.replaceAll(/(.*?)\..*/g,"$1"))||void 0,children:[(0,i.jsx)(ex.Sn,{children:e}),h?(0,i.jsx)(ex.bq,{as:_.t}):x?(0,i.jsx)(ex.bq,{as:P.O}):null]},e)})}):null};var eg=t(9875),ej=t(7258),ep=t(777),em=t(4576),ef=t(8130),eb=t(6672),ev=t(908);t(3659);var eC=t(3687),ey=t(1678),ek=t(8600),ew=t(9430),eS=t(7437),eI=t(4094),ez=t(7597),eL=t.n(ez),eN=t(5564),eR=t(8574),eT=t(8940),eO=t(2883),eD=t(7191),eA=t(151),eW=t(1702),eH=t(4325),eB=t(2303),eF=t(2509),eE=t(6353);let eV={".headingFlex":{flexDirection:"row-reverse",justifyContent:"flex-end"},".outlineHeadingButton":{display:"none"},h1:{color:"black",lineHeight:"1.2",fontSize:"16",fontWeight:"bold",paddingTop:2},h2:{fontSize:"14",color:"black",fontWeight:"bold",fontStyle:"bold italic",paddingTop:2},h3:{fontSize:"13",color:"black",paddingTop:2},h4:{fontSize:"12",fontStyle:"italic",color:"black",paddingTop:2},".sectionContent":{paddingTop:2}},eP={".headingFlex":{flexDirection:"row",justifyContent:"flex-start"},".viewerHeadingButton":{display:"none"},".sectionContent":{mt:3,paddingLeft:4,ml:"11px",borderLeftWidth:"1px",borderLeftColor:"gray.500"},".preHeadingContent":{},"h1,h2,h3,h4,h5,h6,h7,h8":{pl:1,lineHeight:"1.25",color:"black",fontSize:15,fontWeight:700},".sec":{pt:1},".wrapClass > div > p":{mb:2},p:{fontWeight:500,fontSize:14,pb:2}},eG={".katex":{overflowX:"scroll"},ol:{paddingLeft:4,py:1},"li::marker":{fontSize:12,fontWeight:"bold"},li:{pt:1},ul:{paddingLeft:"5"},p:{fontSize:"14",fontWeight:"500 !important",pb:2},div:{hyphens:"auto !important"},".title":{textAlign:"center",marginBottom:".2em"},".subtitle":{textAlign:"center",fontSize:"medium",fontWeight:"bold",marginTop:0},".TODO":{color:"red.500"},".equationContainer":{display:"table",textAlign:"center",width:"100%"},".equation":{verticalAlign:"middle"},".equation-label":{display:"tableCell",textAlign:"right",verticalAlign:"middle"},".inlinetask":{padding:"10px",border:"2px solid gray",margin:"10px",background:"#ffffcc"},"#org-div-home-and-up":{textAlign:"right",fontSize:"70 % ",whiteSpace:"nowrap"},textarea:{overflowX:"auto"},".linenr":{fontSize:"smaller"},".org-info-js_info-navigation":{borderStyle:"none"},"#org-info-js_console-label":{fontSize:"10px",fontWeight:"bold",whiteSpace:"nowrap"},".org-info-js_search-highlight":{backgroundColor:"#ffff00",color:"#000000",fontWeight:"bold"},".org-svg":{width:"90%"},".DONE":{color:"green"},".priority":{fontFamily:"monospace",color:"orange"},".tag":{backgroundColor:"white",fontFamily:"monospace",padding:"2px",fontSize:"80%",fontWeight:"normal"},".timestamp":{color:"#bebebe"},".timestamp-kwd":{color:"#5f9ea0"},".org-right":{marginLeft:"auto",marginRight:"0px",textAlign:"right"},".org-left":{marginLeft:"0px",marginRight:"auto",textAlign:"left"},".org-center":{marginLeft:"auto",marginRight:"auto",textAlign:"center"},".underline":{textDecoration:"underline"},"#postamble p":{fontSize:"90%",margin:".2em"},"#preamble p":{fontSize:"90%",margin:".2em"},"p.verse":{marginLeft:"3%"},pre:{borderRadius:"3px",backgroundColor:"white",padding:"8pt",fontFamily:"monospace",overflow:"auto",margin:"1.2em"},"pre.src":{position:"relative",overflow:"auto"},"pre.src:before":{display:"none",position:"absolute",top:"-8px",right:"12px",padding:"3px",backgroundColor:"white"},"caption.t-above":{captionSide:"top"},"caption.t-bottom":{captionSide:"bottom"},"th.org-right":{textAlign:"center"},"th.org-left":{textAlign:"center"},"th.org-center":{textAlign:"center"},"td.org-right":{textAlign:"right"},"td.org-left":{textAlign:"left"},"td.org-center":{textAlign:"center"},".footpara":{display:"inline"},".footdef":{marginBottom:"1em"},".figure":{padding:"1em"},".figure p":{textAlign:"center"},".math.math-display .katex":{overflow:"auto",minHeight:"1.5em"}};var eM=t(6658),e_=t(9055);let eq=e=>{let{noUnderline:l,id:t,setSidebarHighlightedNode:n,setPreviewNode:r,nodeById:o,openContextMenu:s,href:a,children:c,isWiki:d}=e,{highlightColor:h}=(0,j.useContext)(eE.N),x=(0,eT.F)(),u=(0,e_.p)(h,x),g=a.replaceAll(/.*?:(.*)/g,"$1"),p=null!=t?t:g;return(0,i.jsx)(D.x,{as:"a",onMouseEnter:()=>n(o[p]),onMouseLeave:()=>n({}),tabIndex:0,display:"inline",overflow:"hidden",fontWeight:500,color:h,textDecoration:l?void 0:"underline",onContextMenu:e=>{e.preventDefault(),s(o[g],e)},onClick:()=>r(o[g]),_hover:{textDecoration:"none",cursor:"pointer",bgColor:u+"22"},_focus:{outlineColor:h},children:d?"[[".concat(c,"]]"):c})},eX=e=>{let{href:l,children:t}=e,{highlightColor:n}=(0,j.useContext)(eE.N);return(0,i.jsxs)(eO.r,{color:n,isExternal:!0,href:l,children:[t,(0,i.jsx)(V.h,{mx:"1px",pb:"2px"})]})},eZ=e=>{let{href:l,children:t,nodeById:n,setSidebarHighlightedNode:r,previewNode:s,setPreviewNode:a,nodeByCite:c,openContextMenu:d,outline:h,noUnderline:x,linksByNodeId:u,isWiki:g,macros:p,attachDir:m,useInheritance:f}=e,[b,v]=(0,j.useState)(null),[C,y]=(0,j.useState)(!1),k=l.replaceAll(/(.*?):.*/g,"$1");console.log(s);let w=()=>{fetch("http://localhost:35901/node/".concat(S)).then(e=>e.text()).then(e=>{if("error"!==e){v(e);return}}).catch(e=>(console.log(e),"Could not fetch the text for some reason, sorry!\n\n This can happen because you have an id with forward slashes (/) in it."))};if((0,j.useEffect)(()=>{k.replaceAll(/(http)?.*/g,"$1")||b||!C||w()},[C,b]),!k)return(0,i.jsx)(D.x,{color:"gray.700",children:t});if(k.replaceAll(/(http)?.*/g,"$1"))return(0,i.jsx)(eX,{href:l,children:t});let S=((e,l)=>{if("id"===e)return l;if(e.includes("cite")){var t;let e=null!==(t=c[l])&&void 0!==t&&t;return!e||(null==e?void 0:e.properties.FILELESS)?"":null==e?void 0:e.id}return""})(k,l.replaceAll(/.*?:(.*)/g,"$1"));if(S){var I,z,L,N;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(eD.J,{gutter:12,trigger:"hover",placement:"top-start",children:[(0,i.jsx)(eA.x,{children:(0,i.jsx)(o.xu,{display:"inline",onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:(0,i.jsx)(eq,{id:S,setSidebarHighlightedNode:r,setPreviewNode:a,nodeById:n,href:l,children:t,nodeByCite:c,openContextMenu:d,noUnderline:x,isWiki:g},null!==(L=null===(I=n[S])||void 0===I?void 0:I.title)&&void 0!==L?L:S)})}),(0,i.jsx)(eW.h,{children:(0,i.jsxs)(eH.y,{transform:"scale(1)",boxShadow:"xl",position:"relative",zIndex:"tooltip",onMouseEnter:()=>{var e;r(null!==(e=n[S])&&void 0!==e?e:{})},onMouseLeave:()=>{r({})},children:[(0,i.jsx)(eB.Q,{}),(0,i.jsx)(eF.b,{pb:5,fontSize:"xs",position:"relative",zIndex:"tooltip",transform:"scale(1)",width:"100%",children:(0,i.jsx)(eM.$B,{autoHeight:!0,autoHeightMax:300,autoHide:!0,renderThumbVertical:e=>{let{style:l,...t}=e;return(0,i.jsx)(o.xu,{style:{...l,borderRadius:0},...t})},children:(0,i.jsx)(o.xu,{w:"100%",color:"black",px:3,sx:{...eG,...h?eP:eV},children:(0,i.jsx)(e7,{previewText:b,nodeById:n,setSidebarHighlightedNode:r,setPreviewNode:a,nodeByCite:c,openContextMenu:d,outline:h,linksByNodeId:u,macros:p,attachDir:m,useInheritance:f,previewNode:n[S],collapse:!1})})})})]},null!==(N=null===(z=n[S])||void 0===z?void 0:z.title)&&void 0!==N?N:S)})]})})}return(0,i.jsx)(D.x,{as:"span",display:"inline",className:l,color:"base.700",cursor:"not-allowed",children:t})};var eU=t(5675),eJ=t.n(eU),eK=t(2520),eQ=t.n(eK),e$=t(2338);let eY=e=>{let{src:l,file:t}=e;if(l.replaceAll(/(http)?.*/g,"$1"))return console.log(l.replaceAll(/(http)?.*/g,"$1")),(0,i.jsx)(eJ(),{layout:"responsive",loader:e=>{let{src:l}=e;return"".concat(l)},src:l,alt:"",style:{width:"auto",height:"auto"}});let n=l.replaceAll(/file:/g,""),r=eQ().dirname(t),o=encodeURIComponent(encodeURIComponent(eQ().isAbsolute(n)||"~"===n.slice(0,1)?n:eQ().join(r,n)));return(0,i.jsx)(e$.W,{my:4,position:"relative",children:(0,i.jsx)("img",{alt:"Wow, an image.",src:"http://localhost:35901/img/".concat(o)})})};var e0=t(1583),e1=t(7640),e2=t(6147);let e5=(0,j.createContext)({outline:!1,collapse:!0}),e3=e=>{let{children:l,className:t}=e,[n,r]=(0,j.useState)(!0),{collapse:a}=(0,j.useContext)(e5);return((0,j.useEffect)(()=>{r(!a)},[a]),"h0Wrapper headingWrapper"===t)?(0,i.jsxs)(o.xu,{className:"preHeadingContent",children:[" ",l]}):(0,i.jsxs)(o.xu,{className:"sec",children:[(0,i.jsx)(o.xu,{display:"block",children:(0,i.jsxs)(s.k,{className:"headingFlex",alignItems:"baseline",children:[n&&l.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.h,{className:"viewerHeadingButton",_focus:{},_active:{},"aria-label":"Expand heading",size:"xs",variant:"subtle",icon:(0,i.jsx)(e1.g,{}),onClick:()=>r(!n),height:2,width:2}),(0,i.jsx)(c.h,{className:"outlineHeadingButton",_focus:{},_active:{},"aria-label":"Expand heading",size:"xs",variant:"subtle",icon:(0,i.jsx)(e0.Vjj,{}),onClick:()=>r(!n),height:2,width:2})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.h,{className:"viewerHeadingButton",_active:{},_focus:{},"aria-label":"Collapse heading",height:2,width:2,size:"xs",variant:"subtle",icon:(0,i.jsx)(e2.v,{}),onClick:()=>r(!n)}),(0,i.jsx)(c.h,{className:"outlineHeadingButton",_active:{},_focus:{},"aria-label":"Collapse heading",height:2,width:2,size:"xs",variant:"subtle",icon:(0,i.jsx)(e0.O6Y,{}),onClick:()=>r(!n)})]}),l[0]]})}),n&&(0,i.jsx)(o.xu,{className:"sectionContent",children:l.slice(1)})]})};var e8=t(5548),e6=t(5315);let e4={Fragment:i.Fragment,jsx:i.jsx,jsxs:i.jsxs},e7=e=>{var l,t;let{nodeById:n,setSidebarHighlightedNode:r,setPreviewNode:s,previewText:a,nodeByCite:c,previewNode:d,openContextMenu:h,outline:x,collapse:u,linksByNodeId:g,macros:p,attachDir:m,useInheritance:f}=e;if(!d||!g)return null;let b=(0,eg.l)().use(ej.Z).use(ef.Z).use(eb.ZP,{idDir:m||void 0,useInheritance:f}).use(em.Z).use(ep.Z,{useSections:!0}),v=(null===(l=g[d.id])||void 0===l?void 0:l.reduce((e,l)=>{let t=(0,e6.J)(l).filter(e=>e!==d.id).join("");return{...e,[t]:n[t]}},{}))||{},C=Object.entries(v),y=(0,eg.l)().use(ey.Z).use(eI.Z,["yaml"]).use(eL()).use(ew.Z,{permaLinks:Object.keys(v),pageResolver:e=>{var l;let t=C.find(l=>{var t;return(null==l?void 0:null===(t=l[1])||void 0===t?void 0:t.title)===e});return[null!==(l=null==t?void 0:t[0])&&void 0!==l?l:""]},hrefTemplate:e=>"id:".concat(e)}).use(eN.Z).use(eS.Z).use(ek.Z).use(eR.Z),k=(null==d?void 0:null===(t=d.file)||void 0===t?void 0:t.slice(-3))===".md",w=k?y:b,S=(0,j.useMemo)(()=>w.use(ev.Z,{trust:e=>["\\htmlId","\\href"].includes(e.command),macros:{"\\eqref":"\\href{###1}{(\\text{#1})}","\\ref":"\\href{###1}{\\text{#1}}","\\label":"\\htmlId{#1}{}",...p}}).use(eC.Z,{...e4,components:{a:e=>{let{children:l,href:t}=e;return(0,i.jsx)(eZ,{nodeByCite:c,setSidebarHighlightedNode:r,href:"".concat(t),nodeById:n,linksByNodeId:g,setPreviewNode:s,openContextMenu:h,outline:x,previewNode:d,isWiki:k,macros:p,attachDir:m,useInheritance:f,children:l})},img:e=>{let{src:l}=e;return(0,i.jsx)(eY,{src:l,file:null==d?void 0:d.file})},section:e=>{let{children:l,className:t}=e;return t&&t.slice(-1)==="".concat(d.level)?(0,i.jsx)(o.xu,{children:l.slice(1)}):(0,i.jsx)(e3,{outline:x,collapse:u,className:t,children:l})},blockquote:e=>{let{children:l}=e;return(0,i.jsx)(e8.m.blockquote,{color:"gray.800",bgColor:"gray.300",pt:4,pb:2,mb:4,mt:3,pl:4,borderLeftWidth:4,borderLeftColor:"gray.700",children:l})},p:e=>{let{children:l}=e;return(0,i.jsx)("p",{lang:"en",children:l})}}}),[null==d?void 0:d.id]),I=(0,j.useMemo)(()=>S.processSync(a).result,[a]);return(0,i.jsx)(e5.Provider,{value:{collapse:u,outline:x},children:I})},e9=e=>{let{openContextMenu:l,setSidebarHighlightedNode:t,nodeById:n,nodeByCite:r,previewNode:o,setPreviewNode:s,outline:a,collapse:c,linksByNodeId:d,macros:h,attachDir:x,useInheritance:u}=e,[g,p]=(0,j.useState)(""),m=encodeURIComponent(encodeURIComponent(o.id));return(0,j.useEffect)(()=>{fetch("http://localhost:35901/node/".concat(m)).then(e=>e.text()).then(e=>{if(""===e)return"(empty node)";"error"!==e&&(console.log(e),p(e))}).catch(e=>(p("(could not find node)"),console.log(e),"Could not fetch the text for some reason, sorry!\n\n This can happen because you have an id with forward slashes (/) in it."))},[o.id]),(0,i.jsx)(i.Fragment,{children:g&&o&&(0,i.jsx)(e7,{nodeById:n,previewNode:o,setPreviewNode:s,previewText:g,nodeByCite:r,setSidebarHighlightedNode:t,openContextMenu:l,outline:a,collapse:c,linksByNodeId:d,attachDir:x,useInheritance:u,macros:h||{}})})};var le=t(8166);let ll=e=>{var l;let{previewNode:t,setPreviewNode:n,setSidebarHighlightedNode:r,nodeById:s,linksByNodeId:a,nodeByCite:c,openContextMenu:d,outline:h,macros:x,attachDir:u,useInheritance:g}=e,j=(null!==(l=a[null==t?void 0:t.id])&&void 0!==l?l:[]).filter(e=>{let[l]=(0,e6.J)(e);return l!==(null==t?void 0:t.id)}).map(e=>e.source);return(0,i.jsxs)(o.xu,{className:"backlinks",borderRadius:"sm",mt:6,p:4,bg:"white",mb:10,children:[(0,i.jsx)("p",{style:{fontSize:16,fontWeight:600},children:"Linked references (".concat(j.length,")")}),(0,i.jsx)(O.g,{py:2,spacing:3,alignItems:"start",divider:(0,i.jsx)(le.c,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:(null==t?void 0:t.id)&&j.map(e=>{var l;return(0,i.jsx)(o.xu,{overflow:"hidden",py:1,borderRadius:"sm",width:"100%",children:(0,i.jsx)(eZ,{linksByNodeId:a,nodeByCite:c,setSidebarHighlightedNode:r,href:"id:".concat(e),nodeById:s,previewNode:t,setPreviewNode:n,openContextMenu:d,outline:h,noUnderline:!0,attachDir:u,useInheritance:g,macros:x,children:null===(l=s[e])||void 0===l?void 0:l.title})},e)})})]})},lt=e=>{let{setPreviewNode:l,justificationList:t,justification:n,previewNode:r,nodeById:a,nodeByCite:c,setSidebarHighlightedNode:d,linksByNodeId:h,openContextMenu:x,outline:u,collapse:g,macros:j,attachDir:p,useInheritance:m}=e,f=u?eP:eV;return(0,i.jsx)(o.xu,{pr:8,pt:2,height:"100%",className:"org",sx:{...eG,...f,textAlign:t[n]},children:(null==r?void 0:r.id)&&(0,i.jsxs)(s.k,{className:"wrapClass",height:"100%",flexDirection:"column",justifyContent:"space-between",children:[(0,i.jsx)(e9,{setPreviewNode:l,previewNode:r,nodeByCite:c,setSidebarHighlightedNode:d,openContextMenu:x,outline:u,collapse:g,nodeById:a,linksByNodeId:h,macros:j,attachDir:p,useInheritance:m}),(0,i.jsx)(ll,{setPreviewNode:l,previewNode:r,nodeById:a,linksByNodeId:h,nodeByCite:c,setSidebarHighlightedNode:d,openContextMenu:x,outline:u,attachDir:p,useInheritance:m,macros:j||{}})]})})},li=e=>{let{previewNode:l}=e;return(0,i.jsx)(s.k,{maxW:"90%",children:(0,i.jsx)(k.X,{lineHeight:1.2,size:"md",fontWeight:600,pt:4,children:null==l?void 0:l.title})})};var ln=t(6312);function lr(e,l){var t,i;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(i=null!==(t=n.storage)&&void 0!==t?t:localStorage,{get(){let l=i.getItem(e);if(l&&"undefined"!==l)return JSON.parse(l)},update(l){i.setItem(e,JSON.stringify(l))},remove(){i.removeItem(e)}}),o=r.get(),s=void 0!==o?o:l,a=null!=o&&"object"==typeof o&&!1===Array.isArray(o)?{...l,...o}:s;a!==o&&r.update(a);let[c,d]=(0,j.useState)(a);return(0,j.useEffect)(()=>{c!==a&&d(a)},[e]),[c,e=>{if(e instanceof Function){d(l=>{let t=e(l);return r.update(t),t});return}d(e),r.update(e)}]}var lo=e=>{let{isOpen:l,onOpen:t,onClose:n,previewNode:r,setPreviewNode:a,nodeById:d,linksByNodeId:h,nodeByCite:x,setSidebarHighlightedNode:u,canUndo:g,canRedo:m,resetPreviewNode:f,previousPreviewNode:b,nextPreviewNode:v,openContextMenu:C,windowWidth:y,filter:k,setFilter:w,tagColors:S,setTagColors:I,macros:z,attachDir:L,useInheritance:N}=e,[R,T]=(0,j.useState)(),[D,A]=lr("sidebarWidth",400);(0,j.useEffect)(()=>{if(!(null==r?void 0:r.id)){n();return}t(),T(r)},[null==r?void 0:r.id]);let[W,H]=lr("justification",1),[B,F]=lr("outline",!1),[E,V]=(0,j.useState)("sans serif"),[P,G]=(0,j.useState)(0),[M,_]=(0,j.useState)(!1);return(0,i.jsx)(ei,{animateOpacity:!1,dimension:"width",in:l,unmountOnExit:!0,startingSize:0,style:{height:"100vh"},children:(0,i.jsx)(ln.e,{size:{height:"100vh",width:D},onResizeStop:(e,l,t,i)=>{A(e=>e+i.width)},enable:{top:!1,right:!1,bottom:!1,left:!0,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},minWidth:"220px",maxWidth:y-200,children:(0,i.jsxs)(s.k,{flexDir:"column",h:"100vh",pl:2,color:"black",bg:"alt.100",width:"100%",children:[(0,i.jsxs)(s.k,{pl:2,alignItems:"center",color:"black",width:"100%",children:[(0,i.jsx)(s.k,{pt:1,flexShrink:0,children:(0,i.jsx)(eh,{setJustification:H,setIndent:G,setFont:V,justification:W,setPreviewNode:a,canUndo:g,canRedo:m,resetPreviewNode:f,previousPreviewNode:b,nextPreviewNode:v,outline:B,setOutline:F,collapse:M,setCollapse:_})}),(0,i.jsx)(s.k,{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",onContextMenu:e=>{e.preventDefault(),C(r,e)}}),(0,i.jsx)(s.k,{flexDir:"row",ml:"auto",children:(0,i.jsx)(c.h,{m:1,icon:(0,i.jsx)(p.T41,{}),"aria-label":"Options",variant:"subtle",onClick:e=>{C(r,e,{left:void 0,top:12,right:-y+20,bottom:void 0})}})})]}),(0,i.jsx)(eM.$B,{autoHide:!0,renderThumbVertical:e=>{let{style:l,...t}=e;return(0,i.jsx)(o.xu,{style:{...l,borderRadius:0},...t})},children:R&&(0,i.jsxs)(O.g,{flexGrow:1,alignItems:"left",bg:"alt.100",paddingLeft:4,children:[(0,i.jsx)(li,{previewNode:R}),(0,i.jsx)(eu,{filter:k,setFilter:w,tagColors:S,setTagColors:I,openContextMenu:C,previewNode:r}),(0,i.jsx)(lt,{setPreviewNode:a,previewNode:r,nodeById:d,nodeByCite:x,setSidebarHighlightedNode:u,justification:W,justificationList:["justify","start","end","center"],linksByNodeId:h,openContextMenu:C,outline:B,setOutline:F,collapse:M,macros:z,attachDir:L,useInheritance:N})]})})]})})})},ls=t(2456),la=t(5948),lc=t(1679),ld=t(2215),lh=t(8087),lx=t(4071),lu=t(7334),lg=t(7234),lj=t(1170),lp=t(3500),lm=t(7647);let lf=e=>{var l;let{filter:t,listName:n,labelFilter:r,displayName:o,setFilter:s,options:a=[]}=e,{highlightColor:c}=(0,j.useContext)(eE.N),d=(null==a?void 0:a.map(e=>({value:e,label:r?e.replace(r,""):e})))||[],[h,x]=(0,j.useState)((null===(l=t[n])||void 0===l?void 0:l.map(e=>({value:e,label:r?null==e?void 0:e.replace(r,""):e})))||[]);return(0,i.jsx)(lm.CUIAutoComplete,{labelStyleProps:{fontWeight:300,fontSize:14},items:d,label:"Add tag to ".concat(o),placeholder:" ",onCreateItem:()=>null,disableCreateItem:!0,selectedItems:h,onSelectedItemsChange:e=>{e.selectedItems&&(x(e.selectedItems),s({...t,[n]:e.selectedItems.map(e=>e.value)}))},listItemStyleProps:{overflow:"hidden"},highlightItemBg:"gray.400",toggleButtonStyleProps:{variant:"outline"},inputStyleProps:{mt:2,height:8,focusBorderColor:c,color:"gray.800",borderColor:"gray.500"},tagStyleProps:{justifyContent:"flex-start",fontSize:10,borderColor:c,borderWidth:1,borderRadius:"md",color:c,bg:"",height:4,mb:2},hideToggleButton:!0,itemRenderer:e=>e.label})},lb=e=>{let{colorList:l,tagColors:t,setTagColors:n,highlightColor:r,tags:a}=e,d=a.map(e=>({value:e,label:e})),[h,x]=(0,j.useState)(Object.keys(t).map(e=>({value:e,label:e})));return(0,i.jsxs)(o.xu,{children:[(0,i.jsx)(lm.CUIAutoComplete,{items:d,labelStyleProps:{fontWeight:300,fontSize:14},label:"Add tag to color",placeholder:" ",disableCreateItem:!0,selectedItems:h,onSelectedItemsChange:e=>{e.selectedItems&&(x(Array.from(new Set(e.selectedItems))),n(Object.fromEntries(Array.from(new Set(e.selectedItems)).map(e=>{var l;return[e.label,null!==(l=t[e.label])&&void 0!==l?l:"gray.600"]}))))},listItemStyleProps:{overflow:"hidden"},highlightItemBg:"gray.400",toggleButtonStyleProps:{variant:"outline"},inputStyleProps:{height:8,focusBorderColor:r,color:"gray.800",borderColor:"gray.500"},tagStyleProps:{display:"none",rounded:"full",bg:r,height:8,paddingLeft:4,fontWeight:"bold"},hideToggleButton:!0,itemRenderer:e=>e.label}),(0,i.jsx)(O.g,{spacing:2,justifyContent:"flex-start",divider:(0,i.jsx)(le.c,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:Object.keys(t).map(e=>(0,i.jsxs)(s.k,{alignItems:"center",justifyContent:"space-between",width:"100%",pl:2,children:[(0,i.jsx)(o.xu,{width:"100%",children:(0,i.jsx)(D.x,{children:e})}),(0,i.jsxs)(C.v,{isLazy:!0,placement:"right",children:[(0,i.jsx)(lj.j,{as:W.z,colorScheme:"",color:"black",children:(0,i.jsx)(o.xu,{bgColor:t[e],borderRadius:"sm",height:6,width:6})}),(0,i.jsx)(eW.h,{children:(0,i.jsx)(y.q,{minW:10,zIndex:"popover",bgColor:"gray.200",children:l.map(l=>(0,i.jsx)(S.s,{onClick:()=>n({...t,[e]:l}),justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,i.jsx)(o.xu,{bgColor:l,borderRadius:"sm",height:6,width:6})},l))})})]}),(0,i.jsx)(c.h,{"aria-label":"Delete tag color",variant:"ghost",icon:(0,i.jsx)(G.p,{}),onClick:()=>{n(Object.fromEntries(Array.from(new Set(h)).map(e=>{var l;return[e.label,null!==(l=t[e.label])&&void 0!==l?l:"gray.600"]}))),x(h.filter(l=>l.value!==e))}})]},e))})]})};var lv=t(4046),lC=t(6070);let ly=e=>{let{infoText:l}=e;return(0,i.jsx)(o.xu,{paddingLeft:"1",children:(0,i.jsx)(a.u,{label:l,placement:"top",color:"gray.100",bg:"gray.800",hasArrow:!0,children:(0,i.jsx)(lC.h,{})})})},lk=e=>{let{min:l=0,max:t=10,step:n=.1,value:r=1,...s}=e,{onChange:c,label:d,infoText:h}=s,{highlightColor:x}=(0,j.useContext)(eE.N);return(0,i.jsxs)(o.xu,{pt:1,pb:2,children:[(0,i.jsxs)(o.xu,{display:"flex",alignItems:"flex-end",mb:2,children:[(0,i.jsx)(D.x,{children:d}),h&&(0,i.jsx)(ly,{infoText:h})]}),(0,i.jsxs)(lv.iR,{value:r,onChange:c,min:l,max:t,step:n,children:[(0,i.jsx)(lv.Uj,{children:(0,i.jsx)(lv.Ms,{})}),(0,i.jsx)(a.u,{bg:x,label:r.toFixed(1),children:(0,i.jsx)(lv.gs,{bg:"white"})})]})]},d)},lw=(0,j.createContext)({subDirs:["dailies",".attach"],attachDir:".attach",useInheritance:!1,roamDir:"~/org",dailyDir:"dailies"});var lS=e=>{let{filter:l,setFilter:t,local:n,setLocal:r,tagColors:a,setTagColors:c,highlightColor:d,colorList:h,tags:x}=e,{roamDir:u,subDirs:g}=(0,j.useContext)(lw);return(0,i.jsxs)(o.xu,{children:[(0,i.jsxs)(O.g,{spacing:2,justifyContent:"flex-start",divider:(0,i.jsx)(le.c,{borderColor:"gray.500"}),align:"stretch",paddingLeft:7,color:"gray.800",children:[(0,i.jsxs)(s.k,{alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(D.x,{children:"Link children to"}),(0,i.jsxs)(C.v,{isLazy:!0,placement:"right",children:[(0,i.jsx)(lj.j,{as:W.z,rightIcon:(0,i.jsx)(e2.v,{}),colorScheme:"",color:"black",size:"sm",children:(()=>{switch(l.parent){case"parent":return(0,i.jsx)(D.x,{children:"File"});case"heading":return(0,i.jsx)(D.x,{children:"Heading"});default:return(0,i.jsx)(D.x,{children:"Nothing"})}})()}),(0,i.jsx)(eW.h,{children:(0,i.jsxs)(y.q,{bgColor:"gray.200",zIndex:"popover",children:[(0,i.jsx)(S.s,{onClick:()=>t(e=>({...e,parent:""})),children:"Nothing"}),(0,i.jsx)(S.s,{onClick:()=>t(e=>({...e,parent:"parent"})),children:"Parent file node"}),(0,i.jsx)(S.s,{onClick:()=>t(e=>({...e,parent:"heading"})),children:"Next highest heading node"})]})})]})]}),(0,i.jsxs)(s.k,{justifyContent:"space-between",children:[(0,i.jsx)(D.x,{children:"Orphans"}),(0,i.jsx)(lp.r,{onChange:()=>{t(e=>({...e,orphans:!e.orphans}))},isChecked:l.orphans})]}),(0,i.jsxs)(s.k,{justifyContent:"space-between",children:[(0,i.jsx)(D.x,{children:"Dailies"}),(0,i.jsx)(lp.r,{onChange:()=>{t(e=>({...e,dailies:!e.dailies}))},isChecked:l.dailies})]}),(0,i.jsxs)(s.k,{justifyContent:"space-between",children:[(0,i.jsx)(D.x,{children:"Org-noter pages"}),(0,i.jsx)(lp.r,{onChange:()=>{t(e=>({...e,noter:!e.noter}))},isChecked:l.noter})]}),(0,i.jsxs)(s.k,{justifyContent:"space-between",children:[(0,i.jsx)(D.x,{children:"Citations without note files"}),(0,i.jsx)(lp.r,{onChange:()=>{t({...l,filelessCites:!l.filelessCites})},isChecked:l.filelessCites})]}),(0,i.jsxs)(s.k,{justifyContent:"space-between",children:[(0,i.jsx)(D.x,{children:"Non-existent nodes"}),(0,i.jsx)(lp.r,{onChange:()=>{c({...a,bad:"white"}),t({...l,bad:!l.bad})},isChecked:l.bad})]}),(0,i.jsx)(lk,{label:"Number of neighbors in local graph",value:n.neighbors,onChange:e=>r({...n,neighbors:e}),min:1,max:5,step:1})]}),(0,i.jsxs)(ld.U,{padding:0,allowToggle:!0,allowMultiple:!0,paddingLeft:3,children:[(0,i.jsxs)(lh.Q,{children:[(0,i.jsxs)(lx.K,{children:["Directory filters",(0,i.jsx)(lu.X,{})]}),(0,i.jsxs)(lg.H,{pr:0,mr:0,children:[(0,i.jsx)(lf,{filter:l,setFilter:t,options:g,displayName:"directory blocklist",listName:"dirsBlocklist",labelFilter:u}),(0,i.jsx)(lf,{filter:l,setFilter:t,options:g,displayName:"directory allowlist",listName:"dirsAllowlist",labelFilter:u})]})]}),(0,i.jsxs)(lh.Q,{children:[(0,i.jsxs)(lx.K,{children:["Tag filters",(0,i.jsx)(lu.X,{})]}),(0,i.jsxs)(lg.H,{pr:0,mr:0,children:[(0,i.jsx)(lf,{filter:l,setFilter:t,options:x,displayName:"tag blocklist",listName:"tagsBlacklist"}),(0,i.jsx)(lf,{filter:l,setFilter:t,options:x,displayName:"tag allowlist",listName:"tagsWhitelist"})]})]}),(0,i.jsxs)(lh.Q,{children:[(0,i.jsxs)(lx.K,{children:["Tag colors",(0,i.jsx)(lu.X,{})]}),(0,i.jsx)(lg.H,{pr:0,mr:0,children:(0,i.jsx)(lb,{tags:x,colorList:h,tagColors:a,setTagColors:c,highlightColor:d})})]})]})]})},lI=t(429);let lz=e=>{let{value:l,onChange:t,label:n,infoText:r,children:s}=e;return(0,i.jsxs)(o.xu,{paddingTop:2,children:[(0,i.jsxs)(o.xu,{display:"flex",justifyContent:"space-between",paddingBottom:2,children:[(0,i.jsxs)(o.xu,{display:"flex",alignItems:"center",children:[(0,i.jsx)(D.x,{children:n}),r&&(0,i.jsx)(ly,{infoText:r})]}),(0,i.jsx)(lp.r,{isChecked:!!l,onChange:t})]}),(0,i.jsx)(lI.U,{in:!!l,animateOpacity:!0,children:(0,i.jsx)(o.xu,{paddingLeft:4,paddingTop:2,paddingBottom:2,children:s})})]},n)},lL=e=>{let{physics:l,setPhysics:t}=e,n=(0,j.useCallback)((e,l,i)=>{t(t=>({...t,[l]:e/i}))},[]);return(0,i.jsxs)(o.xu,{children:[(0,i.jsxs)(O.g,{spacing:2,justifyContent:"flex-start",divider:(0,i.jsx)(le.c,{borderColor:"gray.500"}),align:"stretch",paddingLeft:7,color:"gray.800",children:[(0,i.jsxs)(lz,{label:"Gravity",value:l.gravityOn,onChange:()=>t({...l,gravityOn:!l.gravityOn}),children:[(0,i.jsxs)(s.k,{justifyContent:"space-between",children:[(0,i.jsx)(D.x,{children:"Also in local"}),(0,i.jsx)(lp.r,{onChange:()=>{t(e=>({...e,gravityLocal:!e.gravityLocal}))},isChecked:l.gravityLocal})]}),(0,i.jsx)(lk,{label:"Strength",value:10*l.gravity,onChange:e=>n(e,"gravity",10)})]}),(0,i.jsx)(lk,{value:-l.charge/100,onChange:e=>n(e,"charge",-.01),label:"Repulsive Force"}),(0,i.jsx)(lk,{value:5*l.linkStrength,onChange:e=>n(e,"linkStrength",5),label:"Link Force"}),(0,i.jsx)(lk,{label:"Stabilization rate",value:50*l.alphaDecay,onChange:e=>n(e,"alphaDecay",50)})]}),(0,i.jsx)(o.xu,{children:(0,i.jsx)(ld.U,{paddingLeft:3,allowToggle:!0,children:(0,i.jsxs)(lh.Q,{children:[(0,i.jsxs)(lx.K,{children:[(0,i.jsx)(D.x,{children:"Advanced"}),(0,i.jsx)(lu.X,{marginRight:2})]}),(0,i.jsx)(lg.H,{children:(0,i.jsxs)(O.g,{spacing:2,justifyContent:"flex-start",divider:(0,i.jsx)(le.c,{borderColor:"gray.500"}),align:"stretch",paddingLeft:3,color:"gray.800",children:[(0,i.jsx)(lz,{label:"Collision",infoText:"Perfomance sap, disable if slow",value:l.collision,onChange:()=>t({...l,collision:!l.collision}),children:(0,i.jsx)(lk,{value:l.collisionStrength/5,onChange:e=>n(e,"collisionStrength",.2),label:"Collision Radius",infoText:"Easy with this one, high values can lead to a real jiggly mess"})}),(0,i.jsx)(lk,{label:"Link iterations",value:l.linkIts,onChange:e=>n(e,"linkIts",1),min:0,max:6,step:1,infoText:"How many links down the line the physics of a single node affects (Slow)"}),(0,i.jsx)(lk,{label:"Viscosity",value:10*l.velocityDecay,onChange:e=>n(e,"velocityDecay",10)}),(0,i.jsx)(lz,{label:"Center nodes",value:l.centering,onChange:()=>t({...l,centering:!l.centering}),infoText:"Keeps the nodes in the center of the viewport. If disabled you can drag the nodes anywhere you want.",children:(0,i.jsx)(lk,{label:"Centering Strength",value:l.centeringStrength,max:2,step:.01,onChange:e=>n(e,"centeringStrength",1)})})]})})]})})})]})},lN=e=>{let{behavior:l,setBehavior:t,mouse:n,setMouse:r}=e;return(0,i.jsxs)(O.g,{spacing:2,justifyContent:"flex-start",divider:(0,i.jsx)(le.c,{borderColor:"gray.500"}),align:"stretch",paddingLeft:7,color:"gray.800",children:[(0,i.jsxs)(s.k,{alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(D.x,{children:"Preview node"}),(0,i.jsxs)(C.v,{isLazy:!0,placement:"right",children:[(0,i.jsx)(lj.j,{as:W.z,rightIcon:(0,i.jsx)(e2.v,{}),colorScheme:"",color:"black",children:(0,i.jsx)(D.x,{children:n.preview?n.preview[0].toUpperCase()+n.preview.slice(1):"Never"})}),(0,i.jsxs)(eW.h,{children:[" ",(0,i.jsxs)(y.q,{bgColor:"gray.200",zIndex:"popover",children:[(0,i.jsx)(S.s,{onClick:()=>r({...n,preview:""}),children:"Never"}),(0,i.jsx)(S.s,{onClick:()=>r({...n,preview:"click"}),children:"Click"}),(0,i.jsx)(S.s,{onClick:()=>r({...n,preview:"double"}),children:"Double Click"})]})]})]})]}),(0,i.jsxs)(s.k,{alignItems:"center",justifyContent:"space-between",children:[(0,i.jsxs)(s.k,{children:[(0,i.jsx)(D.x,{children:"Expand Node"}),(0,i.jsx)(ly,{infoText:"View only the node and its direct neighbors"})]}),(0,i.jsxs)(C.v,{isLazy:!0,placement:"right",children:[(0,i.jsx)(lj.j,{as:W.z,rightIcon:(0,i.jsx)(e2.v,{}),colorScheme:"",color:"black",children:(0,i.jsx)(D.x,{children:n.local?n.local[0].toUpperCase()+n.local.slice(1):"Never"})}),(0,i.jsxs)(eW.h,{children:[" ",(0,i.jsxs)(y.q,{zIndex:"popover",bgColor:"gray.200",children:[(0,i.jsx)(S.s,{onClick:()=>r({...n,local:""}),children:"Never"}),(0,i.jsx)(S.s,{onClick:()=>r({...n,local:"click"}),children:"Click"}),(0,i.jsx)(S.s,{onClick:()=>r({...n,local:"double"}),children:"Double Click"}),(0,i.jsx)(S.s,{onClick:()=>r({...n,local:"right"}),children:"Right Click"})]})]})]})]}),(0,i.jsxs)(s.k,{alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(D.x,{children:"Open in Emacs"}),(0,i.jsxs)(C.v,{isLazy:!0,placement:"right",children:[(0,i.jsx)(lj.j,{as:W.z,rightIcon:(0,i.jsx)(e2.v,{}),colorScheme:"",color:"black",children:(0,i.jsx)(D.x,{children:n.follow?n.follow[0].toUpperCase()+n.follow.slice(1):"Never"})}),(0,i.jsxs)(eW.h,{children:[" ",(0,i.jsxs)(y.q,{bgColor:"gray.200",zIndex:"popover",children:[(0,i.jsx)(S.s,{onClick:()=>r({...n,follow:""}),children:"Never"}),(0,i.jsx)(S.s,{onClick:()=>r({...n,follow:"click"}),children:"Click"}),(0,i.jsx)(S.s,{onClick:()=>r({...n,follow:"double"}),children:"Double Click"}),(0,i.jsx)(S.s,{onClick:()=>r({...n,follow:"right"}),children:"Right Click"})]})]})]})]}),(0,i.jsxs)(s.k,{alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(D.x,{children:"Follow Emacs by..."}),(0,i.jsxs)(C.v,{isLazy:!0,placement:"right",children:[(0,i.jsx)(lj.j,{as:W.z,rightIcon:(0,i.jsx)(e2.v,{}),colorScheme:"",color:"black",children:(0,i.jsx)(D.x,{children:l.follow[0].toUpperCase()+l.follow.slice(1)})}),(0,i.jsxs)(eW.h,{children:[" ",(0,i.jsxs)(y.q,{bgColor:"gray.200",zIndex:"popover",children:[(0,i.jsx)(S.s,{onClick:()=>t({...l,follow:"color"}),children:"Just coloring the currently opened node"}),(0,i.jsx)(S.s,{onClick:()=>t({...l,follow:"local"}),children:"Opening the local graph"}),(0,i.jsx)(S.s,{onClick:()=>t({...l,follow:"zoom"}),children:"Zooming to the current node"})]})]})]})]}),(0,i.jsxs)(s.k,{alignItems:"center",justifyContent:"space-between",children:[(0,i.jsxs)(s.k,{children:[(0,i.jsx)(D.x,{children:"Local graph"}),(0,i.jsx)(ly,{infoText:"When in local mode and clicking a new node, should I add that node's local graph or open the new one?"})]}),(0,i.jsxs)(C.v,{isLazy:!0,placement:"right",children:[(0,i.jsx)(lj.j,{as:W.z,rightIcon:(0,i.jsx)(e2.v,{}),colorScheme:"",color:"black",children:(0,i.jsx)(D.x,{children:"add"===l.localSame?"Add":"Replace"})}),(0,i.jsxs)(eW.h,{children:[" ",(0,i.jsxs)(y.q,{bgColor:"gray.200",zIndex:"popover",children:[(0,i.jsx)(S.s,{onClick:()=>t({...l,localSame:"replace"}),children:"Open that nodes graph"}),(0,i.jsx)(S.s,{onClick:()=>t({...l,localSame:"add"}),children:"Add node to local graph"})]})]})]})]}),(0,i.jsx)(lk,{label:"Zoom speed",value:l.zoomSpeed,min:0,max:4e3,step:100,onChange:e=>t({...l,zoomSpeed:e})}),(0,i.jsx)(lk,{label:"Zoom padding",value:l.zoomPadding,min:0,max:400,step:1,onChange:e=>t({...l,zoomPadding:e}),infoText:"How much to zoom out to accomodate all nodes when changing the view."})]})};var lR=t(1731);let lT=e=>{let{visuals:l,setVisuals:t}=e;return(0,i.jsx)(O.g,{spacing:2,justifyContent:"flex-start",divider:(0,i.jsx)(le.c,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:(0,i.jsx)(o.xu,{children:(0,i.jsx)(lz,{label:"Highlight",onChange:()=>t(e=>({...e,highlight:!e.highlight})),value:l.highlight,children:(0,i.jsxs)(O.g,{spacing:1,justifyContent:"flex-start",divider:(0,i.jsx)(le.c,{borderColor:"gray.400"}),align:"stretch",paddingLeft:0,children:[(0,i.jsx)(lk,{label:"Highlight Link Thickness",value:l.highlightLinkSize,onChange:e=>t(l=>({...l,highlightLinkSize:e}))}),(0,i.jsx)(lk,{label:"Highlight Node Size",value:l.highlightNodeSize,onChange:e=>t(l=>({...l,highlightNodeSize:e}))}),(0,i.jsx)(lk,{min:0,max:1,label:"Highlight Fade",value:l.highlightFade,onChange:e=>t(l=>({...l,highlightFade:e}))}),(0,i.jsxs)(lz,{label:"Highlight Animation",onChange:()=>{t(e=>({...e,highlightAnim:!e.highlightAnim}))},value:l.highlightAnim,children:[(0,i.jsx)(lk,{label:"Animation speed",onChange:e=>t(l=>({...l,animationSpeed:e})),value:l.animationSpeed,infoText:"Slower speed has a chance of being buggy",min:50,max:1e3,step:10}),(0,i.jsx)(lR.P,{placeholder:l.algorithmName,onChange:e=>{t(l=>({...l,algorithmName:e.target.value}))},children:l.algorithmOptions.map(e=>(0,i.jsx)("option",{value:e,children:e},e))})]})]})})})})};var lO=t(606),lD=t(4862),lA=t(1991),lW=t(8689);let lH=e=>{let{label:l,colorList:t,value:n,visValue:r,setVisuals:a,noEmpty:c}=e,d=(0,j.useCallback)(e=>a(l=>({...l,[n]:e})),[]);return(0,i.jsxs)(s.k,{alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(D.x,{children:l}),(0,i.jsxs)(eD.J,{isLazy:!0,placement:"right",children:[(0,i.jsx)(eA.x,{children:(0,i.jsx)(W.z,{colorScheme:"",color:"black",rightIcon:(0,i.jsx)(e2.v,{}),children:(0,i.jsx)(o.xu,{bgColor:r,borderRadius:"sm",height:6,width:6})})}),(0,i.jsx)(eW.h,{children:(0,i.jsx)(eH.y,{zIndex:"tooltip",maxW:36,position:"relative",children:(0,i.jsxs)(s.k,{flexWrap:"wrap",bgColor:"gray.200",children:[!c&&(0,i.jsx)(o.xu,{onClick:()=>d(""),justifyContent:"space-between",alignItems:"center",display:"flex",m:1,children:(0,i.jsx)(o.xu,{height:6,width:6,borderColor:"gray.600",borderRadius:"xl",borderWidth:1})}),t.map(e=>(0,i.jsx)(o.xu,{m:1,onClick:()=>d(e),justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,i.jsx)(o.xu,{bgColor:e,borderRadius:"xl",height:6,width:6})},e))]})})})]})]})},lB=e=>{let{visuals:l,setVisualsCallback:t,highlightColor:n,setHighlightColor:r}=e;return(0,i.jsx)(O.g,{spacing:2,justifyContent:"flex-start",divider:(0,i.jsx)(le.c,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:(0,i.jsxs)(o.xu,{children:[(0,i.jsxs)(s.k,{alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(D.x,{children:"Nodes"}),(0,i.jsx)(a.u,{label:"Shuffle node colors",children:(0,i.jsx)(c.h,{"aria-label":"Shuffle node colors",size:"sm",icon:(0,i.jsx)(lO.n,{}),variant:"ghost",onClick:()=>{var e;let i=null!==(e=l.nodeColorScheme)&&void 0!==e?e:[];t({...l,nodeColorScheme:i.map(e=>[Math.random(),e]).sort((e,l)=>{let[t]=e,[i]=l;return t-i}).map(e=>{let[l,t]=e;return t})})}})}),(0,i.jsx)(a.u,{label:"Cycle node colors",children:(0,i.jsx)(c.h,{"aria-label":"Shift node colors",icon:(0,i.jsx)(lD.L,{}),size:"sm",variant:"ghost",onClick:()=>{var e;let i=null!==(e=l.nodeColorScheme)&&void 0!==e?e:[];t({...l,nodeColorScheme:[...i.slice(1,i.length),i[0]]})}})}),(0,i.jsxs)(C.v,{isLazy:!0,placement:"right",closeOnSelect:!1,matchWidth:!0,children:[(0,i.jsx)(lj.j,{width:20,as:W.z,colorScheme:"",color:"black",rightIcon:(0,i.jsx)(e2.v,{}),children:(0,i.jsx)(s.k,{height:6,width:6,flexDirection:"column",flexWrap:"wrap",children:l.nodeColorScheme.map(e=>(0,i.jsx)(o.xu,{bgColor:e,flex:"1 1 8px",borderRadius:"2xl"},e))})}),(0,i.jsxs)(eW.h,{children:[" ",(0,i.jsx)(y.q,{minW:10,zIndex:"popover",bgColor:"gray.200",children:(0,i.jsx)(lA._,{width:500,type:"checkbox",defaultValue:l.nodeColorScheme,onChange:e=>{e.length&&t({...l,nodeColorScheme:e})},children:v.bG.map(e=>(0,i.jsx)(lW.i,{isChecked:l.nodeColorScheme.some(l=>l===e),value:e,isDisabled:1===l.nodeColorScheme.length&&l.nodeColorScheme[0]===e,children:(0,i.jsx)(o.xu,{justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,i.jsx)(o.xu,{bgColor:e,borderRadius:"sm",height:6,width:6})})},e))})})]})]})]}),(0,i.jsxs)(s.k,{alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(D.x,{children:"Links"}),(0,i.jsxs)(C.v,{isLazy:!0,placement:"right",children:[(0,i.jsx)(lj.j,{as:W.z,colorScheme:"",color:"black",rightIcon:(0,i.jsx)(e2.v,{}),children:(0,i.jsx)(o.xu,{children:l.linkColorScheme?(0,i.jsx)(o.xu,{bgColor:l.linkColorScheme,borderRadius:"sm",height:6,width:6}):(0,i.jsx)(s.k,{height:6,width:6,flexDirection:"column",flexWrap:"wrap",children:l.nodeColorScheme.map(e=>(0,i.jsx)(o.xu,{bgColor:e,flex:"1 1 8px",borderRadius:"2xl"},e))})})}),(0,i.jsxs)(eW.h,{children:[" ",(0,i.jsxs)(y.q,{minW:10,zIndex:"popover",bgColor:"gray.200",children:[(0,i.jsx)(S.s,{onClick:()=>t({...l,linkColorScheme:""}),justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,i.jsx)(s.k,{height:6,width:6,flexDirection:"column",flexWrap:"wrap",children:l.nodeColorScheme.map(e=>(0,i.jsx)(o.xu,{bgColor:e,flex:"1 1 8px",borderRadius:"2xl"},e))})}),v.bG.map(e=>(0,i.jsx)(S.s,{onClick:()=>t({...l,linkColorScheme:e}),justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,i.jsx)(o.xu,{bgColor:e,borderRadius:"sm",height:6,width:6})},e))]})]})]})]}),(0,i.jsxs)(s.k,{alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(D.x,{children:"Accent"}),(0,i.jsxs)(C.v,{isLazy:!0,placement:"right",children:[(0,i.jsx)(lj.j,{as:W.z,colorScheme:"",color:"black",rightIcon:(0,i.jsx)(e2.v,{}),children:(0,i.jsx)(o.xu,{bgColor:n,borderRadius:"sm",height:6,width:6})}),(0,i.jsxs)(eW.h,{children:[" ",(0,i.jsx)(y.q,{minW:10,zIndex:"popover",bgColor:"gray.200",children:v.bG.map(e=>(0,i.jsx)(S.s,{onClick:()=>r(e),justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,i.jsx)(o.xu,{bgColor:e,borderRadius:"sm",height:6,width:6})},e))})]})]})]}),(0,i.jsx)(lH,{colorList:v.bG,label:"Link highlight",setVisuals:t,value:"linkHighlight",visValue:l.linkHighlight}),(0,i.jsx)(lH,{colorList:v.bG,label:"Node highlight",setVisuals:t,value:"nodeHighlight",visValue:l.nodeHighlight}),(0,i.jsx)(lH,{colorList:v.bG,label:"Background",setVisuals:t,value:"backgroundColor",visValue:l.backgroundColor}),(0,i.jsx)(lH,{colorList:v.bG,label:"Emacs node",setVisuals:t,value:"emacsNodeColor",visValue:l.emacsNodeColor})]})})},lF=e=>{let{visuals:l,setVisuals:t,threeDim:n}=e;return(0,i.jsx)(O.g,{spacing:2,justifyContent:"flex-start",divider:(0,i.jsx)(le.c,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:(0,i.jsxs)(o.xu,{children:[(0,i.jsx)(lk,{label:"Node size",value:l.nodeRel,onChange:e=>t({...l,nodeRel:e})}),(0,i.jsx)(lk,{label:"Node degree size multiplier",value:l.nodeSizeLinks,min:0,max:2,onChange:e=>t({...l,nodeSizeLinks:e})}),(0,i.jsx)(lk,{label:"Node zoom invariance",value:l.nodeZoomSize,min:0,max:2,infoText:"How much the graph will try to keep the nodesize consistent across zoom scales. 0 is no consistency, node will always be their true size, 1 is linear, 2 is quadratic.",onChange:e=>t(l=>({...l,nodeZoomSize:e}))}),n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(lk,{label:"Node opacity",value:l.nodeOpacity,min:0,max:1,onChange:e=>t({...l,nodeOpacity:e})}),(0,i.jsx)(lk,{label:"Node resolution",value:l.nodeResolution,min:5,max:32,step:1,onChange:e=>t({...l,nodeResolution:e})})]}),(0,i.jsx)(lk,{label:"Link width",value:l.linkWidth,onChange:e=>t({...l,linkWidth:e})}),n&&(0,i.jsx)(lk,{label:"Link opacity",min:0,max:1,value:l.linkOpacity,onChange:e=>t({...l,linkOpacity:e})}),(0,i.jsxs)(lz,{label:"Link arrows",value:l.arrows,onChange:()=>t({...l,arrows:!l.arrows}),children:[(0,i.jsx)(lk,{label:"Arrow size",value:l.arrowsLength/10,onChange:e=>t({...l,arrowsLength:10*e})}),(0,i.jsx)(lk,{label:"Arrow Position",value:l.arrowsPos,min:0,max:1,step:.01,onChange:e=>t({...l,arrowsPos:e})}),(0,i.jsx)(lH,{colorList:v.bG,label:"Arrow Color",setVisuals:t,value:"arrowsColor",visValue:l.arrowsColor},"arrow")]}),(0,i.jsxs)(lz,{label:"Directional Particles",value:l.particles,onChange:()=>t({...l,particles:!l.particles}),children:[(0,i.jsx)(lk,{label:"Particle Number",value:l.particlesNumber,max:5,step:1,onChange:e=>t({...l,particlesNumber:e})}),(0,i.jsx)(lk,{label:"Particle Size",value:l.particlesWidth,onChange:e=>t({...l,particlesWidth:e})})]})]})})},lE=e=>{let{visuals:l,setVisuals:t}=e;return(0,i.jsxs)(O.g,{spacing:2,justifyContent:"flex-start",divider:(0,i.jsx)(le.c,{borderColor:"gray.400"}),align:"stretch",color:"gray.800",children:[(0,i.jsxs)(s.k,{alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(D.x,{children:"Show labels"}),(0,i.jsxs)(C.v,{isLazy:!0,placement:"right",children:[(0,i.jsx)(lj.j,{as:W.z,colorScheme:"",color:"black",rightIcon:(0,i.jsx)(e2.v,{}),children:l.labels?l.labels<2?"On Highlight":"Always":"Never"}),(0,i.jsxs)(eW.h,{children:[" ",(0,i.jsxs)(y.q,{zIndex:"popover",bgColor:"gray.200",children:[(0,i.jsx)(S.s,{onClick:()=>t({...l,labels:0}),children:"Never"}),(0,i.jsx)(S.s,{onClick:()=>t({...l,labels:1}),children:"On Highlight"}),(0,i.jsx)(S.s,{onClick:()=>t({...l,labels:2}),children:"Always"}),(0,i.jsx)(S.s,{onClick:()=>t({...l,labels:3}),children:"Always (even in 3D)"})]})]})]})]}),(0,i.jsxs)(lI.U,{in:l.labels>1,animateOpacity:!0,children:[(0,i.jsx)(o.xu,{paddingTop:2,children:(0,i.jsx)(lk,{label:"Label Appearance Scale",value:2*l.labelScale,onChange:e=>t({...l,labelScale:e/2})})}),(0,i.jsxs)(o.xu,{paddingTop:2,children:[(0,i.jsx)(lk,{label:"Label dynamicity",infoText:"By default, labels of nodes with more links will appear earlier than those with fewer. This slider changes the strength of this effect, put it at zero to disable it.",value:l.labelDynamicStrength,min:0,max:1,step:.05,onChange:e=>t(l=>({...l,labelDynamicStrength:e}))}),(0,i.jsx)(lI.U,{in:l.labelDynamicStrength>0,children:(0,i.jsx)(lk,{label:"Dynamic zoom degree cap",infoText:"The maximum number of links that is considered for the 'dynamic zoom effect'. Past this number all number of links are treated the same.",value:l.labelDynamicDegree,min:1,max:15,step:1,onChange:e=>t(l=>({...l,labelDynamicDegree:e}))})})]})]}),(0,i.jsx)(lH,{colorList:v.bG,label:"Text",setVisuals:t,value:"labelTextColor",visValue:l.labelTextColor}),(0,i.jsxs)(o.xu,{children:[(0,i.jsx)(lH,{colorList:v.bG,label:"Background",setVisuals:t,value:"labelBackgroundColor",visValue:l.labelBackgroundColor}),(0,i.jsx)(lI.U,{in:!!l.labelBackgroundColor,animateOpacity:!0,children:(0,i.jsx)(o.xu,{paddingTop:2,children:(0,i.jsx)(lk,{label:"Background opacity",value:l.labelBackgroundOpacity,onChange:e=>{console.log(l.labelBackgroundOpacity),t({...l,labelBackgroundOpacity:e})},min:0,max:1,step:.01})})})]}),(0,i.jsx)(lk,{label:"Label font size",value:l.labelFontSize,min:5,max:20,step:.5,onChange:e=>t({...l,labelFontSize:e})}),(0,i.jsx)(lk,{label:"Max. label characters",value:l.labelLength,min:10,max:100,step:1,onChange:e=>t({...l,labelLength:e})}),(0,i.jsx)(lk,{label:"Max. label line length",value:l.labelWordWrap,min:10,max:100,step:1,onChange:e=>t({...l,labelWordWrap:e})}),(0,i.jsx)(lk,{label:"Space between label lines",value:l.labelLineSpace,min:.2,max:3,step:.1,onChange:e=>t({...l,labelLineSpace:e})})]})};var lV=t(5393);let lP=()=>{let{emacsTheme:e,setEmacsTheme:l}=(0,j.useContext)(eE.N);return(0,i.jsxs)(s.k,{alignItems:"center",justifyContent:"space-between",pl:7,pr:2,children:[(0,i.jsx)(D.x,{children:"Theme"}),(0,i.jsxs)(C.v,{isLazy:!0,placement:"bottom",closeOnSelect:!1,children:[(0,i.jsx)(lj.j,{as:W.z,size:"sm",colorScheme:"",color:"black",rightIcon:(0,i.jsx)(e2.v,{}),children:(0,i.jsx)(i.Fragment,{children:e[0]})}),(0,i.jsxs)(y.q,{minW:10,zIndex:"popover",bgColor:"gray.200",children:[(0,i.jsx)(S.s,{onClick:()=>"",justifyContent:"space-between",alignItems:"center",display:"flex",children:(0,i.jsx)(o.xu,{height:6,width:6})}),Object.keys(lV.n).map(e=>(0,i.jsxs)(S.s,{onClick:()=>l([e,lV.n[e]]),justifyContent:"space-between",alignItems:"center",display:"flex",children:[(0,i.jsx)(D.x,{children:e}),(0,i.jsx)(s.k,{height:6,width:20,flexDirection:"column",flexWrap:"wrap",children:Object.values(lV.n[e]).map(e=>(0,i.jsx)(o.xu,{bgColor:e,flex:"1 1 8px"},e))})]},e))]})]})]})},lG=e=>{let{visuals:l,setVisuals:t}=e;return(0,i.jsx)(O.g,{spacing:2,justifyContent:"flex-start",divider:(0,i.jsx)(le.c,{borderColor:"gray.500"}),align:"stretch",color:"gray.800",children:(0,i.jsxs)(o.xu,{children:[(0,i.jsxs)(lz,{label:"Dash cite links",infoText:"Add dashes to citation links made with org-roam-bibtex",value:l.citeDashes,onChange:()=>t({...l,citeDashes:!l.citeDashes}),children:[(0,i.jsx)(lk,{label:"Dash length",value:l.citeDashLength/10,onChange:e=>t({...l,citeDashLength:10*e})}),(0,i.jsx)(lk,{label:"Gap length",value:l.citeGapLength/5,onChange:e=>t({...l,citeGapLength:5*e})})]}),(0,i.jsx)(lH,{colorList:v.bG,label:"Citation node color",setVisuals:t,value:"citeNodeColor",visValue:l.citeNodeColor}),(0,i.jsx)(lH,{colorList:v.bG,label:"Citation link color",setVisuals:t,value:"citeLinkColor",visValue:l.citeLinkColor}),(0,i.jsx)(lH,{colorList:v.bG,label:"Reference link highlight",setVisuals:t,value:"citeLinkHighlightColor",visValue:l.citeLinkHighlightColor}),(0,i.jsxs)(lz,{label:"Dash ref links",infoText:"Add dashes to citation links, whose target has a note, made with org-roam-bibtex",value:l.refDashes,onChange:()=>t({...l,refDashes:!l.refDashes}),children:[(0,i.jsx)(lk,{label:"Dash length",value:l.refDashLength/10,onChange:e=>t({...l,refDashLength:10*e})}),(0,i.jsx)(lk,{label:"Gap length",value:l.refGapLength/5,onChange:e=>t({...l,refGapLength:5*e})})]}),(0,i.jsx)(lH,{colorList:v.bG,label:"Reference node color",setVisuals:t,value:"refNodeColor",visValue:l.refNodeColor}),(0,i.jsx)(lH,{colorList:v.bG,label:"Reference link color",setVisuals:t,value:"refLinkColor",visValue:l.refLinkColor}),(0,i.jsx)(lH,{colorList:v.bG,label:"Reference link highlight",setVisuals:t,value:"refLinkHighlightColor",visValue:l.refLinkHighlightColor})]})})},lM=e=>{let{coloring:l,setColoring:t}=e;return(0,i.jsxs)(s.k,{alignItems:"center",justifyContent:"space-between",pl:7,pr:2,children:[(0,i.jsx)(D.x,{children:"Graph coloring"}),(0,i.jsxs)(C.v,{isLazy:!0,placement:"right",children:[(0,i.jsx)(lj.j,{as:W.z,size:"sm",colorScheme:"",color:"black",rightIcon:(0,i.jsx)(e2.v,{}),children:"degree"===l.method?"Links":"Communities"}),(0,i.jsx)(eW.h,{children:(0,i.jsxs)(y.q,{minW:10,zIndex:"popover",bgColor:"gray.200",children:[(0,i.jsx)(S.s,{onClick:()=>t(e=>({...e,method:"degree"})),justifyContent:"space-between",alignItems:"center",display:"flex",children:"Number of links"}),(0,i.jsx)(S.s,{onClick:()=>t(e=>({...e,method:"community"})),justifyContent:"space-between",alignItems:"center",display:"flex",children:"Communities"})]})})]})]})},l_=e=>{let{coloring:l,setColoring:t,visuals:n,setVisuals:r,highlightColor:o,setHighlightColor:a,threeDim:c}=e,d=(0,j.useCallback)(e=>r(e),[]);return(0,i.jsxs)(O.g,{justifyContent:"flex-start",align:"stretch",children:[(0,i.jsx)(lP,{}),(0,i.jsx)(lM,{coloring:l,setColoring:t}),(0,i.jsxs)(ld.U,{allowToggle:!0,defaultIndex:[0],paddingLeft:3,children:[(0,i.jsxs)(lh.Q,{children:[(0,i.jsx)(lx.K,{children:(0,i.jsxs)(s.k,{justifyContent:"space-between",w:"100%",children:[(0,i.jsx)(D.x,{children:"Colors"}),(0,i.jsx)(lu.X,{marginRight:2})]})}),(0,i.jsx)(lg.H,{children:(0,i.jsx)(lB,{visuals:n,setVisualsCallback:d,highlightColor:o,setHighlightColor:a})})]}),(0,i.jsxs)(lh.Q,{children:[(0,i.jsx)(lx.K,{children:(0,i.jsxs)(s.k,{justifyContent:"space-between",w:"100%",children:[(0,i.jsx)(D.x,{children:"Nodes & Links"}),(0,i.jsx)(lu.X,{marginRight:2})]})}),(0,i.jsx)(lg.H,{children:(0,i.jsx)(lF,{visuals:n,setVisuals:d,threeDim:c})})]}),(0,i.jsxs)(lh.Q,{children:[(0,i.jsx)(lx.K,{children:(0,i.jsxs)(s.k,{justifyContent:"space-between",w:"100%",children:[(0,i.jsx)(D.x,{children:"Labels"}),(0,i.jsx)(lu.X,{marginRight:2})]})}),(0,i.jsx)(lg.H,{children:(0,i.jsx)(lE,{visuals:n,setVisuals:d})})]}),(0,i.jsxs)(lh.Q,{children:[(0,i.jsx)(lx.K,{children:(0,i.jsxs)(s.k,{justifyContent:"space-between",w:"100%",children:[(0,i.jsx)(D.x,{children:"Highlighting"}),(0,i.jsx)(lu.X,{marginRight:2})]})}),(0,i.jsx)(lg.H,{children:(0,i.jsx)(lT,{visuals:n,setVisuals:d})})]}),(0,i.jsxs)(lh.Q,{children:[(0,i.jsx)(lx.K,{children:(0,i.jsxs)(s.k,{justifyContent:"space-between",w:"100%",children:[(0,i.jsx)(D.x,{children:"Citations"}),(0,i.jsx)(lu.X,{marginRight:2})]})}),(0,i.jsx)(lg.H,{children:(0,i.jsx)(lG,{visuals:n,setVisuals:d})})]})]})]})},lq=e=>{let{physics:l,setPhysics:t,threeDim:n,setThreeDim:r,filter:s,setFilter:d,visuals:h,setVisuals:x,mouse:u,setMouse:g,behavior:p,setBehavior:m,tags:f,tagColors:b,setTagColors:C,coloring:y,setColoring:w,local:S,setLocal:I}=e,[z,L]=lr("showTweaks",!1),{highlightColor:N,setHighlightColor:R}=(0,j.useContext)(eE.N);return z?(0,i.jsxs)(o.xu,{position:"absolute",bg:"alt.100",w:"xs",marginTop:2,marginLeft:2,borderRadius:"lg",paddingBottom:5,zIndex:10,boxShadow:"xl",maxH:"95vh",fontSize:"sm",children:[(0,i.jsxs)(o.xu,{display:"flex",justifyContent:"space-between",alignItems:"center",paddingRight:2,paddingTop:1,children:[(0,i.jsx)(a.u,{label:"2D",children:(0,i.jsx)(W.z,{onClick:()=>r(!n),variant:"subtle",zIndex:"overlay",children:n?"3D":"2D"})}),(0,i.jsxs)(o.xu,{display:"flex",alignItems:"center",children:[(0,i.jsx)(a.u,{label:"Reset settings to defaults",children:(0,i.jsx)(c.h,{"aria-label":"Reset Defaults",icon:(0,i.jsx)(la.A,{}),onClick:()=>{x(v.po),d(v.wy),g(v.nD),t(v.Hl),m(v.o1),w(v.eG),R("purple.500"),I(v.To)},variant:"subtle",size:"sm"})}),(0,i.jsx)(c.h,{size:"sm",icon:(0,i.jsx)(lc.T,{}),"aria-label":"Close Tweak Panel",variant:"subtle",onClick:()=>L(!1)})]})]}),(0,i.jsx)(eM.ZP,{autoHeight:!0,autoHeightMax:.85*globalThis.innerHeight,autoHide:!0,renderThumbVertical:e=>{let{style:l,...t}=e;return(0,i.jsx)(o.xu,{...t,style:{...l,borderRadius:10},bg:N})},children:(0,i.jsxs)(ld.U,{allowMultiple:!0,allowToggle:!0,color:"black",children:[(0,i.jsxs)(lh.Q,{children:[(0,i.jsxs)(lx.K,{children:[(0,i.jsx)(lu.X,{marginRight:2}),(0,i.jsx)(k.X,{size:"sm",children:"Filter"})]}),(0,i.jsx)(lg.H,{children:(0,i.jsx)(lS,{filter:s,setFilter:d,tagColors:b,setTagColors:C,highlightColor:N,colorList:v.bG,tags:f,local:S,setLocal:I})})]}),(0,i.jsxs)(lh.Q,{children:[(0,i.jsx)(lx.K,{display:"flex",justifyContent:"space-between",children:(0,i.jsxs)(o.xu,{display:"flex",children:[(0,i.jsx)(lu.X,{marginRight:2}),(0,i.jsx)(k.X,{size:"sm",children:"Physics"})]})}),(0,i.jsx)(lg.H,{children:(0,i.jsx)(lL,{physics:l,setPhysics:t})})]}),(0,i.jsxs)(lh.Q,{children:[(0,i.jsxs)(lx.K,{children:[(0,i.jsx)(lu.X,{marginRight:2}),(0,i.jsx)(k.X,{size:"sm",children:"Visual"})]}),(0,i.jsx)(lg.H,{children:(0,i.jsx)(l_,{visuals:h,setVisuals:x,highlightColor:N,setHighlightColor:R,threeDim:n,coloring:y,setColoring:w})})]}),(0,i.jsxs)(lh.Q,{children:[(0,i.jsxs)(lx.K,{children:[(0,i.jsx)(lu.X,{marginRight:2}),(0,i.jsx)(k.X,{size:"sm",children:"Behavior"})]}),(0,i.jsx)(lg.H,{children:(0,i.jsx)(lN,{behavior:p,setBehavior:m,mouse:u,setMouse:g})})]})]})})]}):(0,i.jsx)(o.xu,{position:"absolute",zIndex:"overlay",marginTop:1,marginLeft:0,display:z?"none":"block",children:(0,i.jsx)(c.h,{variant:"subtle","aria-label":"Settings",icon:(0,i.jsx)(ls.e,{}),onClick:()=>L(!0)})})},lX=g()(()=>Promise.all([t.e(737),t.e(445),t.e(446),t.e(218),t.e(631)]).then(t.bind(t,4631)),{loadableGenerated:{webpack:()=>[4631]},ssr:!1});function lZ(){let[e,l]=(0,j.useState)(!1);return((0,j.useEffect)(()=>{l(!0)},[]),e)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x(),{children:(0,i.jsx)("title",{children:"ORUI"})}),(0,i.jsx)(lU,{})]}):null}function lU(){let[e,l]=lr("3d",!1),[t,h]=lr("tagCols",{}),[x,u]=(0,j.useState)({nodeIds:[],excludedNodeIds:[]}),[g,C]=lr("physics",v.Hl),[y,k]=lr("filter",v.wy),[w,S]=lr("visuals",v.po),[I,z]=(0,j.useState)(null),[L,N]=(0,j.useState)(null),[R,T]=lr("behavior",v.o1),[O,D]=lr("mouse",v.nD),[A,W]=lr("coloring",v.eG),[H,B]=lr("local",v.To),[F,{set:E,reset:V,undo:P,redo:G,canUndo:M,canRedo:_}]=(0,b.Z)({}),{present:q}=F,[X,Z]=(0,j.useState)(null),{isOpen:U,onOpen:J,onClose:K}=(0,n.q)(),Q=(0,j.useRef)({}),$=(0,j.useRef)({}),Y=(0,j.useRef)({}),ee=(0,j.useRef)([]),el=(0,j.useRef)(null),[et,ei]=(0,j.useState)({}),en=(0,j.useRef)({}),eo=(0,j.useRef)({nodes:[],links:[]}),es=e=>{var l,t,i;let n=Q.current;ee.current=null!==(l=e.tags)&&void 0!==l?l:[];let r=null!==(t=e.nodes)&&void 0!==t?t:[],o=null!==(i=e.links)&&void 0!==i?i:[],s=r.reduce((e,l)=>{var t;return{...e,[l.file]:[...null!==(t=e[l.file])&&void 0!==t?t:[],l]}},{}),a=Object.keys(s).flatMap(e=>{var l;let t=null!==(l=s[e])&&void 0!==l?l:[],i=t.find(e=>0===e.level),n=t.filter(e=>0!==e.level);return i?n.map(e=>{let l=t.filter(l=>{var t,i;return!(l.level>=e.level)&&!(l.pos>=e.pos)&&!!(null===(i=e.olp)||void 0===i?void 0:i.includes(null===(t=l.title)||void 0===t?void 0:t.replace(/ *\[\d*\/\d*\] */g,"")))}).reduce((e,l)=>(l.level>e.level&&(e=l),e),i);return{source:e.id,target:(null==l?void 0:l.id)||i.id,type:"heading"}}):[]}),c=Object.keys(s).flatMap(e=>{var l;let t=null!==(l=s[e])&&void 0!==l?l:[],i=t.find(e=>0===e.level),n=t.filter(e=>0!==e.level);return i?n.map(e=>({source:e.id,target:i.id,type:"parent"})):[]});Q.current=Object.fromEntries(r.map(e=>[e.id,e]));let d=[],h=[...o,...a,...c].map(e=>{let l=e.source,t=e.target;return Q.current[l]?Q.current[t]?e:(d.push({id:t,tags:["bad"],properties:{FILELESS:"yes",bad:"yes"},file:"",title:t,level:0,pos:0,olp:null}),{...e,type:"bad"}):(d.push({id:l,tags:["bad"],properties:{FILELESS:"yes",bad:"yes"},file:"",title:l,level:0,pos:0,olp:null}),{...e,type:"bad"})});Q.current={...Q.current,...Object.fromEntries(d.map(e=>[e.id,e]))},$.current=h.reduce((e,l)=>{var t,i;return{...e,[l.source]:[...null!==(t=e[l.source])&&void 0!==t?t:[],l],[l.target]:[...null!==(i=e[l.target])&&void 0!==i?i:[],l]}},{});let x=[...r,...d];Y.current=x.reduce((e,l)=>{var t;let i=null===(t=l.properties)||void 0===t?void 0:t.ROAM_REFS;if(!(null==i?void 0:i.includes("cite")))return e;let n=i.replaceAll(/cite:(.*)/g,"$1");return n?{...e,[n]:l}:e},{});let u=eo.current;if(0===u.nodes.length){let e=JSON.parse(JSON.stringify({nodes:x,links:h}));eo.current=e,z(e);return}let g=[...u.nodes.flatMap(e=>{let l=void 0!==e.id&&null!==e.id&&Q.current[e.id];return l?[{...e,...l}]:[]}),...Object.keys(Q.current).filter(e=>!n[e]).map(e=>Q.current[e])],j=g.reduce((e,l,t)=>{let i=null==l?void 0:l.id;return{...e,[i]:t}},{}),p=h.map(e=>{let[l,t]=(0,e6.J)(e);return{...e,source:g[j[l]],target:g[j[t]]}});z({nodes:g,links:p})};(0,j.useEffect)(()=>{I&&(eo.current=I)},[I]);let{setEmacsTheme:ea}=(0,j.useContext)(eE.N),ec=(0,j.useRef)({nodeIds:[],excludedNodeIds:[]}),ed=(0,j.useRef)(v.o1);ed.current=R;let eh=(0,j.useRef)(null);ec.current=x;let ex=function(e,l){var t;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200;if("color"===e)return;let r=el.current,o=ec.current,s=ed.current,a=null!==(t=$.current[l])&&void 0!==t?t:[],c=Object.fromEntries([l,...a.flatMap(e=>[e.source,e.target])].map(e=>[e,{}]));if("zoom"===e){o.nodeIds.length&&u({nodeIds:[],excludedNodeIds:[]}),setTimeout(()=>r.zoomToFit(i,n,e=>c[e.id]),50);return}if(!o.nodeIds.length){u(e=>({...e,nodeIds:[l]})),setTimeout(()=>{r.centerAt(0,0,10),r.zoomToFit(1,n)},50);return}if("add"!==s.localSame){u(e=>({...e,nodeIds:[l]})),setTimeout(()=>{r.centerAt(0,0,10),r.zoomToFit(1,n)},50);return}if(!o.nodeIds.includes(l)||!o.nodeIds.some(e=>c[e])){u(e=>({...e,nodeIds:[l]})),setTimeout(()=>{r.centerAt(0,0,10),r.zoomToFit(1,n)},50);return}u(e=>({...e,nodeIds:[...e.nodeIds,l]})),setTimeout(()=>{r.centerAt(0,0,10),r.zoomToFit(1,n)},50)};(0,j.useEffect)(()=>{eh.current=new f.Z("ws://localhost:35903"),eh.current.addEventListener("open",()=>{console.log("Connection with Emacs established")}),eh.current.addEventListener("message",e=>{let l=ed.current,t=JSON.parse(e.data);switch(t.type){case"graphdata":return es(t.data);case"variables":ei(t.data),console.log(t);return;case"theme":return ea(["custom",t.data]);case"command":switch(t.data.commandName){case"local":ex("local",t.data.id,R.zoomSpeed,R.zoomPadding),N(t.data.id);break;case"zoom":{var i,n;let e=(null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.speed)||l.zoomSpeed,r=(null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.padding)||l.zoomPadding;ex("zoom",t.data.id,e,r),N(t.data.id);break}case"follow":ex(l.follow,t.data.id,l.zoomSpeed,l.zoomPadding),N(t.data.id);break;case"change-local-graph":{let e=Q.current[t.data.id];if(!e)break;console.log(t),ey(e,t.data.manipulation);break}default:return console.error("unknown message type",t.type)}}})},[]),(0,j.useEffect)(()=>{let e=el.current;if(e&&!(x.nodeIds.length>1)){if(!x.nodeIds.length&&g.gravityOn){e.zoomToFit();return}setTimeout(()=>{e.zoomToFit(5,200)},50)}},[x.nodeIds]);let[eu,eg]=(0,d.iP)(),ej=(0,j.useRef)(),[ep,em]=(0,j.useState)(null),[ef,eb]=(0,j.useState)({left:0,top:0,right:void 0,bottom:void 0}),ev=(0,n.q)();(0,r.O)({ref:ej,handler:()=>{ev.onClose()}});let eC=(e,l,t)=>{t?eb(t):eb({left:l.pageX,top:l.pageY,right:void 0,bottom:void 0}),em(e),ev.onOpen()},ey=(e,l)=>{if("remove"===l){u(l=>({nodeIds:l.nodeIds.filter(l=>l!==e.id),excludedNodeIds:[...l.excludedNodeIds,e.id]}));return}if("replace"===l){u({nodeIds:[e.id],excludedNodeIds:[]});return}x.nodeIds.includes(e.id)||u(l=>({excludedNodeIds:l.excludedNodeIds.filter(l=>l!==e.id),nodeIds:[...l.nodeIds,e.id]}))},[ek,ew]=lr("mainWindowWidth",eu);return(0,i.jsx)(lw.Provider,{value:{...et},children:(0,i.jsxs)(o.xu,{display:"flex",alignItems:"flex-start",flexDirection:"row",height:"100vh",overflow:"clip",children:[(0,i.jsx)(lq,{physics:g,setPhysics:C,threeDim:e,setThreeDim:l,filter:y,setFilter:k,visuals:w,setVisuals:S,mouse:O,setMouse:D,behavior:R,setBehavior:T,tagColors:t,setTagColors:h,coloring:A,setColoring:W,local:H,setLocal:B,tags:ee.current}),(0,i.jsx)(o.xu,{position:"absolute",children:I&&(0,i.jsx)(lX,{nodeById:Q.current,linksByNodeId:$.current,webSocket:eh.current,variables:et,physics:g,graphData:I,threeDim:e,emacsNodeId:L,filter:y,visuals:w,behavior:R,mouse:O,scope:x,setScope:u,tagColors:t,setPreviewNode:E,sidebarHighlightedNode:X,windowWidth:eu,windowHeight:eg,openContextMenu:eC,contextMenu:ev,handleLocal:ey,mainWindowWidth:ek,setMainWindowWidth:ew,setContextMenuTarget:em,graphRef:el,clusterRef:en,coloring:A,local:H})}),(0,i.jsx)(o.xu,{position:"relative",zIndex:4,width:"100%",children:(0,i.jsx)(s.k,{className:"headerBar",h:10,flexDir:"column",children:(0,i.jsx)(s.k,{alignItems:"center",h:10,justifyContent:"flex-end",children:(0,i.jsxs)(s.k,{height:"100%",flexDirection:"row",children:[x.nodeIds.length>0&&(0,i.jsx)(a.u,{label:"Return to main graph",children:(0,i.jsx)(c.h,{m:1,icon:(0,i.jsx)(p.DvO,{}),"aria-label":"Exit local mode",onClick:()=>u(e=>({...e,nodeIds:[]})),variant:"subtle"})}),(0,i.jsx)(a.u,{label:U?"Close sidebar":"Open sidebar",children:(0,i.jsx)(c.h,{m:1,icon:(0,i.jsx)(m.iBV,{}),"aria-label":"Close file-viewer",variant:"subtle",onClick:U?K:J})})]})})})}),(0,i.jsx)(o.xu,{position:"relative",zIndex:4,children:(0,i.jsx)(lo,{isOpen:U,onOpen:J,onClose:K,previewNode:q,setPreviewNode:E,canUndo:M,canRedo:_,previousPreviewNode:P,nextPreviewNode:G,resetPreviewNode:V,setSidebarHighlightedNode:Z,openContextMenu:eC,scope:x,setScope:u,windowWidth:eu,tagColors:t,setTagColors:h,filter:y,setFilter:k,macros:et.katexMacros,attachDir:et.attachDir||"",useInheritance:et.useInheritance||!1,nodeById:Q.current,linksByNodeId:$.current,nodeByCite:Y.current})}),ev.isOpen&&(0,i.jsx)("div",{ref:ej,children:(0,i.jsx)(er,{scope:x,target:ep,background:!1,coordinates:ef,handleLocal:ey,menuClose:ev.onClose.bind(ev),webSocket:eh.current,setPreviewNode:E,setFilter:k,filter:y,setTagColors:h,tagColors:t})})]})})}},9055:function(e,l,t){"use strict";t.d(l,{p:function(){return i}});let i=(e,l)=>e.split(".").reduce((e,l)=>e[l],l.colors)},5315:function(e,l,t){"use strict";function i(e){return["object"==typeof e.source?e.source.id:e.source,"object"==typeof e.target?e.target.id:e.target]}t.d(l,{J:function(){return i}})},2591:function(e,l,t){"use strict";function i(e,l,t){t.send(JSON.stringify({command:e,data:l}))}function n(e,l){i("open",{id:e.id},l)}function r(e,l){0===e.level&&i("delete",{id:e.id,file:e.file},l)}function o(e,l){i("create",{id:e.id,title:e.title,ref:e.properties.ROAM_REFS},l)}t.d(l,{ef:function(){return r},sC:function(){return o},y2:function(){return n}})}},function(e){e.O(0,[909,838,509,738,817,265,183,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);